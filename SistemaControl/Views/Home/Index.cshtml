
@model PagedList.IPagedList<BackEnd.Model.Caso>
@using PagedList.Mvc;
@{

    ViewBag.user = User.Identity.Name;
 }
<style>
    .col-lg-3.col-sm-6 {
        width: 33%;
    }
    div#miscasos {
        width: 150%;
    }
</style>
<section class="content-header" style="text-align:center;">
    <h1>
        Menú Pricipal
        <small>SCJ</small>
    </h1>
    @*<ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Dashboard</li>
        </ol>*@
</section>
<!-- Main content -->
<div class="container" style="margin-top:20px">
    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div class="col-lg-3 col-sm-6">
            <!-- small box -->
            <div class="small-box bg-green-gradient">
                <div class="inner">
                    <h3>@ViewBag.numeroCasos</h3>
                    <p>Cantidad de Procesos</p>
                </div>
                <div class="icon">
                    <i class="fa fa-users"></i>
                </div> @*box box-default collapsed-box*@

                <!-- Custom tabs (Charts with tabs)-->
                <!-- DONUT CHART -->
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h2 class="box-title">Procesos</h2>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body chart-responsive">
                        <div class="chart" id="procesos" style="height: 300px; position: relative;"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.nav-tabs-custom -->
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-sm-6">
            <!-- small box -->
            <div class="small-box bg-light-blue-active">
                <div class="inner">
                    <h3>@ViewBag.numeroDocumentos<sup style="font-size: 20px"></sup></h3>
                    <p>Cantidad de Documentos</p>
                </div>
                <div class="icon">
                    <i class="fa fa-users"></i>
                </div>
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h2 class="box-title">Documentos</h2>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body chart-responsive">
                        <div class="chart" id="documentos" style="height: 300px; position: relative;"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-sm-6">
            <!-- small box -->
            <div class="small-box bg-green-active">
                <div class="inner">
                    <h3>@ViewBag.numeroPersonas</h3>
                    <p>Cantidad de Personas</p>
                </div>
                <div class="icon">
                    <i class="ion ion-person"></i>
                </div>
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h2 class="box-title">Personas</h2>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body chart-responsive">
                        <div class="chart" id="personas" style="height: 300px; position: relative;"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
            </div>
        </div>
        <!-- ./col -->
    </div>
    <!-- /.row -->
    <!-- Main row -->
    <div class="row" id="miscasos">
        <!-- Left col -->
        <section class="col-md-8 connectedSortable">
            <!-- Custom tabs (Charts with tabs)-->
            <!-- DONUT CHART -->
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Mis procesos pra pra</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    @*<div class="chart" id="sales-chart" style="height: 300px; position: relative;"></div>*@
                    <table class="table table-bordered" id="table_casos">
                        <thead>
                            <tr>
                                <th></th>
                                <th>
                                    Número de Proceso
                                </th>
                                <th>Abogado</th>
                                <th>Materia</th>
                                <th>Persona</th>
                                <th>Tipo de Proceso</th>
                                <th>Tipo de Litigio</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody class="todo-list">
                            @if (Model.Count() == 0)
                            {
                                <tr><td align="center" colspan="7">No hay registros que coincidan con la busqueda.</td></tr>
                            }
                            else
                            {
                                foreach (var item in Model)
                                {
                                    <tr class="text">
                                        <td>
                                            <span class="handle">
                                                <i class="fa fa-ellipsis-v"></i>
                                                <i class="fa fa-ellipsis-v"></i>
                                            </span>
                                        </td>
                                        <td style="display:none;">
                                            @Html.DisplayFor(modelItem => item.idCaso)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.numeroCaso)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Usuario.nombre)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.materia)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Persona.nombreCompleto)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TablaGeneral1.descripcion)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TablaGeneral2.descripcion)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TablaGeneral.descripcion)
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.nav-tabs-custom -->
        </section>
    </div>
    <!-- /.row (main row) -->
</div>

<div id="detalleModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="detalleModal" aria-hidden="true" style="position: fixed" data-keyboard="false" data-backdrop="static">
</div>

<div id="contextMenu" class="dropdown clearfix">
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
        <li>
            <a tabindex="-1" href="#" onclick="Details(getInd())" data-value="getInd()" data-toggle="modal" data-target="#detalleModal">Ver detalles</a>
        </li>
        <li class="divider"></li>
    </ul>
</div>

<!-- Morris.js charts -->
<script src="~/Content/wwwroot/bower_components/raphael/raphael.min.js"></script>
<script src="~/Content/wwwroot/bower_components/morris.js/morris.min.js"></script>
<script>
  $(function () {
    "use strict";
    //DONUT CHART
    var donut = new Morris.Donut({
        element: 'procesos',
      resize: true,
        colors: ["rgb(26, 179, 148)", "rgb(84, 205, 180)", "rgb(135, 214, 198)"],
      data: [
        {label: "Procesos Activos", value: @ViewBag.numeroCasos},
        {label: "Procesos Administrativos", value: @ViewBag.numeroAdministrativos},
        {label: "Procesos Judiciales", value: @ViewBag.numeroJudiciales}
      ],
        hideHover: 'auto'
    });
  });

  $(function () {

    var donut2 = new Morris.Donut({
      element: 'documentos',
      resize: true,
      colors: ["#1d3752", "#214d72", "#2c7695", "#50bfc3"],
      data: [
        {label: "Documentos Activos", value: @ViewBag.numeroDocumentos},
        {label: "Número de Entradas", value: @ViewBag.numEntradas},
        {label: "Número de Salidas", value: @ViewBag.numSalidas},
        {label: "Número de Expedientes", value:@ViewBag.numExpedientes}
      ],
        hideHover: 'auto'
    });
  });

  $(function () {
    "use strict";
    //DONUT CHART
    var donut3 = new Morris.Donut({
        element: 'personas',
      resize: true,
      colors: ["#2a484e", "#377375", "#a8d8cd"],
      data: [
        {label: "Personas", value: @ViewBag.numeroPersonas},
          { label: "Personas Físicas", value: @ViewBag.numeroFisicas},
          { label: "Personas Jurídicas", value: @ViewBag.numeroJuridicas}
      ],
        hideHover: 'auto'
    });
  });

    // jQuery UI sortable for the todo list
    $('.todo-list').sortable({
        placeholder: 'sort-highlight',
        handle: '.handle',
        forcePlaceholderSize: true,
        zIndex: 999999
    });
</script>
